<sect1 id="zend.captcha.operation">
    <title>Captcha Operation</title>

    <para>
        All concrete CAPTCHA objects implement
        <code>Zend_Captcha_Adapter</code>, which looks like the following:
    </para>

    <programlisting role="php"><![CDATA[
interface Zend_Captcha_Adapter extends Zend_Validate_Interface 
{
	public function generate();

	public function render(Zend_View $view, $element = null);

	public function setName($name);

	public function getName();

	public function getDecorator();

    // Additionally, to satisfy Zend_Validate_Interface:
    public function isValid($value);

    public function getMessages();

    public function getErrors();
}
]]></programlisting>

    <para>
        The name mutator and accessor are used to specify and retrieve the
        captcha identifier. <code>getDecorator()</code> can be used to specify a
        Zend_Form decorator either by name or returning an actual decorator
        object. The true keys to usage, however, lie in <code>generate()</code>
        and <code>render()</code>. <code>generate()</code> is used to create the
        captcha token. This process typically will store the token in the
        session so that you may compare against it in subsequent requests.
        <code>render()</code> is used to render the information that represents
        the captcha -- be it in image, a figlet, a logic problem, etc.
    </para>

    <para>
        A typical use case might look like the following:
    </para>

        <programlisting role="php"><![CDATA[
// Originating request:
$captcha = new Zend_Captcha_Figlet(array(
    'name' => 'foo',
    'wordLen' => 6,
    'timeout' => 300,
));
$id = $captcha->generate();
echo $captcha->render();

// On subsequent request:
// Assume captcha setup as before, and $value is the submitted value:
if ($captcha->isValid($value)) {
    // Validated!
}
]]></programlisting>
</sect1>
<!--
vim:se ts=4 sw=4 et:
-->
