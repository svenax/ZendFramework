<!-- EN-Revision: 11872 -->
<sect3 id="zend.controller.router.routes.hostname">
    <title>Zend_Controller_Router_Route_Hostname</title>

    <para>
        <code>Zend_Controller_Router_Hostname</code>
        はホスト名によるルートです。標準のルートと同じように動作しますが、
        パスではなくコールされた URL のホスト名に基づいて動作します。
    </para>

    <para>
        標準のルートの例を使用して、
        ホスト名に基づいた動作がどのようなものになるのかを見ていきましょう。
        パスを利用してユーザをコールするのではなく、たとえば
        <code>http://martel.users.example.com</code>
        でユーザ "martel" の情報を見られるようにしたいものとします。
    </para>

    <programlisting role="php"><![CDATA[
$hostnameRoute = new Zend_Controller_Router_Route_Hostname(
    ':username.users.example.com',
    array(
        'controller' => 'profile',
        'action'     => 'userinfo'
    )
);

$plainPathRoute = new Zend_Controller_Router_Route_Static('');

$router->addRoute('user', $hostnameRoute->chain($plainPathRoute);
]]>
    </programlisting>

    <para>
        <code>Zend_Controller_Router_Route_Hostname</code>
        のコンストラクタの最初のパラメータはルートの定義で、
        これがホスト名にマッチします。
        ルート定義には静的な部分と動的な部分があり、両者はドット
        ('.') で区切られています。動的な部分 (変数)
        は、変数名の先頭にコロンをつけて <code>:username</code>
        のように表します。静的な部分は、<code>user</code>
        のように単純なテキストで表します。
    </para>

    <para>
        hostname ルートを単独で使うこともできますが、決してしてはいけません。
        その理由は、hostname ルートはそれ単体だと任意のパスにマッチすることになるからです。
        hostname ルートの後には path ルートをつなげなければなりません。
        例に示したように、<code>$hostnameRoute->chain($pathRoute);</code>
        のようにコールすることになります。こうすると、
        <code>$hostnameRoute</code> には何も変更は加えられませんが、新たなルート
        (<code>Zend_Controller_Router_Route_Chain</code>) が返されます。
        そして、これをルータに渡します。
    </para>
    
    <note>
        <title>パラメータの優先度</title>
        <para>
            hostname ルートと path ルートを連結させるときは、
            hostname ルートのパラメータのほうが
            path ルートのパラメータより優先されます。
            したがって、hostname ルートと path ルートの両方でコントローラを定義した場合は
            hostname ルートで指定したコントローラが選択されます。
        </para>
    </note>
    
    <sect4 id="zend.controller.router.routes.hostname.config">
        <title>Zend_Config 経由での hostname ルートの使用</title>

        <para>
            現時点では、hostname ルートと path ルートの連結を
            Zend_Config 経由で行うことはできません。
            hostname ルートと path ルートを Zend_Config
            オブジェクト内で作成することはできますが、
            それを連結するコードは自前で書かなければならないということです。
            config の実装は、Zend Framework の将来のバージョンで行われる予定です。
        </para>
    </sect4>
</sect3>
<!--
vim:se ts=4 sw=4 et:
-->
