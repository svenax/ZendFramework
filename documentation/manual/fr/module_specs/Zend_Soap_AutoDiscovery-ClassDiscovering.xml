<!-- EN-Revision: 9884 -->
<sect1 id="zend.soap.autodiscovery.class">
    <title>Auto découverte de classe.</title>

    <para>Si une classe est utilisée dans un serveur SOAP, alors celle-ci devrait aussi être fournie à
    <code>Zend_Soap_AutoDiscovery</code> afin d'en générer le fichier WSDL : <programlisting role="php"><![CDATA[$autodiscover = new Zend_Soap_AutoDiscover();
$autodiscover->setClass('My_SoapServer_Class');
$autodiscover->handle();]]></programlisting></para>

    <para>Les règles suivantes sont utilisées lors de la génération du fichier WSDL : <itemizedlist>
            <listitem>
                <para>Le fichier WSDL généré décrit un service Web de type RPC.</para>
            </listitem>

            <listitem>
                <para>Le nom du service crée sera le nom de la classe utilisée.</para>
            </listitem>

            <listitem>
                <para><code>'http://' .$_SERVER['HTTP_HOST'] . $_SERVER['SCRIPT_NAME']</code> est utilisé comme URI pour
                rechercher le fichier WSDL.</para>

                <para>Cet URI est aussi utilisé comme un espace de nom cible pour tous les noms du service (incluant les
                types complexes décrits éventuellement).</para>
            </listitem>

            <listitem>
                <para>Les méthodes de la classe sont jointes dans un <ulink
                url="http://www.w3.org/TR/wsdl#_porttypes">Port Type</ulink>.</para>

                <para><code>$className . 'Port'</code> est utilisé comme nom de Port Type.</para>
            </listitem>

            <listitem>
                <para>Chaque méthode de la classe est enregistrée comme une opération.</para>
            </listitem>

            <listitem>
                <para>Chaque prototype de méthode génère des messages de requête/réponse correspondants.</para>

                <para>Une méthode peut avoir plusieurs prototypes si des paramètres sont optionnels.</para>
            </listitem>
        </itemizedlist></para>

    <note>
        <title>Important !</title>

        <para>L'auto génération du fichier WSDL (avec auto découverte de la classe) utilise les blocs de documentation
        de PHP insérés par le développeur dans ses classes, afin de trouver les types retournés. De ce fait, pour les
        types scalaires, c'est le seul moyen de les déterminer de manière sûre, et concernant les types de retour des
        méthodes, c'est le seul moyen de les découvrir (PHP étant faiblement typé).</para>

        <para>Ceci signifie que documenter de manière correcte vos classes et méthodes n'est pas seulement une bonne
        pratique, c'est tout simplement essentiel pour partager vos classes en tant que services SOAP auto
        générés.</para>
    </note>
</sect1>